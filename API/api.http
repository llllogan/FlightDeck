# @userId = 
# @tabGroupId = 
# @tabId = 

# @hamish=

# @host = flightdeck.site/api
@host = localhost:3000/api

### Admin Login (JWT)
POST http://{{host}}/auth/login
Content-Type: application/json
Accept: application/json

{
  "name": "admin",
  "password": "admin-password"
}

### Refresh Access Token
POST http://{{host}}/auth/refresh
Content-Type: application/json
Accept: application/json

{
  "refreshToken": "<refresh_token_here>"
}

### Username Availability
GET http://{{host}}/auth/username-available?name={{username}}
Accept: application/json

### Register
POST http://{{host}}/auth/register
Content-Type: application/json
Accept: application/json

{
  "name": "{{username}}",
  "password": "new-strong-password"
}

### Admin List Users (requires Bearer token)
GET http://{{host}}/admin/users
Accept: application/json
Authorization: Bearer <access_token_here>

### Health Check
GET http://{{host}}/health
Accept: application/json

### List Constants
GET http://{{host}}/consts/environments
Accept: application/json

### Get User Tab Groups
GET http://{{host}}/users/tab-groups
Accept: application/json

### Get User Summary
GET http://{{host}}/users/summary
Accept: application/json

### Get Workspace
GET http://{{host}}/users/workspace
Accept: application/json

### Create Tab Group
POST http://{{host}}/tab-groups
Content-Type: application/json
Accept: application/json

{
  "title": "Connectwise"
}

### Rename Tab Group
PATCH http://{{host}}/tab-groups/{{tabGroupId}}
Content-Type: application/json
Accept: application/json

{
  "title": "Updated Tab Group"
}

### Delete Tab Group
DELETE http://{{host}}/tab-groups/{{tabGroupId}}
Accept: application/json

### Get Tab Group Summary
GET http://{{host}}/tab-groups/summary
Accept: application/json

### Get Tabs For Tab Group
GET http://{{host}}/tab-groups/{{tabGroupId}}/tabs
Accept: application/json

### Create Tab
POST http://{{host}}/tabs
Content-Type: application/json
Accept: application/json

{
  "tabGroupId": "{{tabGroupId}}",
  "title": "Connectwise",
  "environment": {
    "name": "prd",
    "url": "https://connectwise.example.com"
  }
}

### Rename Tab
PATCH http://{{host}}/tabs/{{tabId}}
Content-Type: application/json
Accept: application/json

{
  "title": "Updated Tab"
}

### Delete Tab
DELETE http://{{host}}/tabs/{{tabId}}
Accept: application/json

### Create Environment
POST http://{{host}}/environments
Content-Type: application/json
Accept: application/json

{
  "tabId": "{{tabId}}",
  "name": "tst",
  "url": "https://example.com"
}

### Update Environment
PATCH http://{{host}}/environments/{{environmentId}}
Content-Type: application/json
Accept: application/json

{
  "name": "Staging",
  "url": "https://staging.example.com"
}

### Delete Environment
DELETE http://{{host}}/environments/{{environmentId}}
Accept: application/json

### List Environments For Tab
GET http://{{host}}/environments/tabs/{{tabId}}
Accept: application/json

### Debug: List all users (available only when NODE_ENV != production)
GET http://{{host}}/debug/users
Accept: application/json


### Debug Bootstrap Admin (available only when NODE_ENV != production)
POST http://{{host}}/debug/bootstrap-admin
Content-Type: application/json
Accept: application/json

{
  "name": "logan",
  "password": ""
}
